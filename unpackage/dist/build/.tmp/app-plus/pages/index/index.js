(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"1b05":function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o})},2287:function(e,t,n){"use strict";(function(e){n("d658"),n("921b");o(n("66fd"));var t=o(n("c97b"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"233e":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("d666")),a=n("48cc"),c=n("87e1"),s=u(n("7ebd")),r=u(n("37c6"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){return n.e("components/icon").then(n.bind(null,"c710"))},g=(i.default.BD_Map_Key,{components:{myicon:f},data:function(){return{bgImgUrl:"/static/images/cloud.jpg",location:{x:"116.40",y:"39.9",name:"北京市"},position:"正在获取位置...",todayData:{},tomorrowData:{},everyHourData:[],everyWeekData:[],airQuality:{},liveWeather:{},lifeStyle:[],lifeEnum:c.lifeIndexEnum,iconTypeObj:c.iconType,warmPrompt:"",width:0,canvasHeight:320,scole:0,canvas_instance:null,apl:0,rain_ins:null,snow_ins:null}},onLoad:function(t){var n=this;console.log(e(t,"页面参数"," at pages\\index\\index.vue:254")),o.getSystemInfo({success:function(t){console.log(e(t,"设备"," at pages\\index\\index.vue:257")),n.width=t.windowWidth,n.scole=t.windowWidth/375}}),this.getPosition()},onShow:function(){},methods:{receivingVoice:function(t){var n=new SpeechSynthesisUtterance;n.text=t,n.lang="zh-cn",n.volume="1",n.rate="1.3",n.pitch="1.4",console.log(e(window,window.speechSynthesis,window.speechSynthesis.speak,n,"window"," at pages\\index\\index.vue:277")),window.speechSynthesis.speak(n)},doTTS:function(){var t="",n=this.lifeStyle,o=this.lifeEnum;n.forEach(function(e){t+=o[e.type]+","+e.brf+","+e.txt}),console.log(e(JSON.stringify(this.lifeStyle),t," at pages\\index\\index.vue:298")),this.receivingVoice(t)},handeleUpdate:function(){o.showModal({title:"版本更新",content:"有新的版本发布，\n检测到您当前为Wifi连接，是否立即进行新版本下载？",confirmText:"立即更新",cancelText:"稍后进行",success:function(t){if(t.confirm){o.showToast({icon:"none",mask:!0,title:"有新的版本发布，\n检测到您目前为Wifi连接，\n程序已启动自动更新。新版本下载完成后将自动弹出安装程序",duration:5e3});var n="http://m.test.yyhealth.com/a/com.yyhealth.strawberry_1.4.1_141.apk",i=plus.downloader.createDownload(n,{},function(e,t){200==t?plus.runtime.install(plus.io.convertLocalFileSystemURL(e.filename),{},{},function(e){o.showToast({title:"安装失败",duration:1500})}):o.showToast({title:"更新失败",duration:1500})});i.start()}else t.cancel&&console.log(e("稍后更新"," at pages\\index\\index.vue:335"))}})},getPosition:function(){console.log(e(255," at pages\\index\\index.vue:341"));var t="wgs84";t="gcj02",console.log(e(t,"getType"," at pages\\index\\index.vue:346")),o.getLocation({type:"gcj02",success:this.updateLocation,fail:function(t){console.log(e(t,"uni.getLocation"," at pages\\index\\index.vue:352"))}})},getData:function(e,t){o.showLoading({title:"加载中"}),Promise.all([this.getWeather(e,t),this.getAir(e,t),this.getHourWeather(e,t),this.getWeatherForWeek(e,t),this.getLifeIndex(e,t)]).then(function(e){o.hideLoading(),o.stopPullDownRefresh()})},updateLocation:function(t){console.log(e(t,"获取用户位置"," at pages\\index\\index.vue:367")),this.rain_ins&&this.rain_ins.stop(),this.snow_ins&&this.snow_ins.stop();var n=t.latitude,o=t.longitude,i=t.name,a={location:{x:n,y:o,name:i||"北京市"},rain_ins:null,snow_ins:null};this.data=a,this.getLocation(n,o,i)},chooseLocation:function(){var t=this;o.chooseLocation({success:function(n){var o=n.latitude,i=n.longitude,a=t.location,c=a.x,s=a.y;o==c&&i==s||(t.getLocation(o,i),console.log(e(n,"选择地址 "," at pages\\index\\index.vue:409")))}})},getLocation:function(t,n){var i=this;console.log(e(t,n,"lat, lon",406," at pages\\index\\index.vue:417")),o.showLoading({title:"定位中",mask:!0}),(0,a.getPosition)(t,n,function(a){if(console.log(e(a,"formatted_addresses"," at pages\\index\\index.vue:423")),200==a.statusCode){var c=a.data.result;console.log(e(c," at pages\\index\\index.vue:426"));var s=c.formatted_addresses.recommend||c.rough;i.position=s,o.hideLoading(),i.getData(t,n)}},function(t){console.log(e(t,"421"," at pages\\index\\index.vue:433")),o.hideLoading()})},getWeather:function(t,n){var o=this;t&&n&&(0,a.getWeatherLive)(t,n,function(e){var t=e.data.HeWeather6[0].now;t.iconType=o.iconTypeObj[t.cond_code];var n=(new Date).getHours(),i=0;i=n<18&&n>=6?0:.6,o.liveWeather=t,o.apl=i;var a=0,u=o.width,l=o.canvasHeight,d=o.scole;t.cond_code>=300&&t.cond_code<400?(a=c.rainType[t.cond_code],o.rain_ins=new s.default(o.canvas_instance,u,l*d,{counts:a,speedCoefficient:.03}),o.rain_ins.start()):t.cond_code>=400&&t.cond_code<500&&(a=c.rainType[t.cond_code],o.setData({snow_ins:new r.default(o.canvas_instance,u,l*d,{counts:a,speedCoefficient:.03})}),o.snow_ins.start())},function(t){console.log(e(t," at pages\\index\\index.vue:482"))})},getHourWeather:function(t,n){var o=this;t&&n&&(0,a.getEveryHoursWeather)(t,n,function(t){var n=t.data.HeWeather6[0].hourly,i=[];n.forEach(function(e){var t={};if(t.time=e.time.split(" ")[1].split(":")[0],"string"==typeof t.time&&"0"==t.time.charAt(0)){var n=t.time;t.time=n.substring(1)}t.iconType=o.iconTypeObj[e.cond_code],t.tmp=e.tmp,i.push(t)}),o.everyHourData=i,console.log(e(i,"arrData"," at pages\\index\\index.vue:506"))},function(t){console.log(e(t," at pages\\index\\index.vue:508"))})},getWeatherForWeek:function(e,t){var n=this;e&&t&&(0,a.getWeekWeather)(e,t,function(e){for(var t=e.data.HeWeather6[0].daily_forecast,o=0;o<t.length;o++){t[o].weekday=c.weekEnum[new Date(t[o].date).getDay()];var i=t[o].date,a=i.split("-");a.shift(),t[o].date=a.join("/"),t[o].dateTxt="".concat(a[0],"月").concat(a[1],"日"),t[o].iconTypeBai=n.iconTypeObj[t[o].cond_code_d],t[o].iconTypeYe=n.iconTypeObj[t[o].cond_code_n]}t[0].weekday="今 天",t[1].weekday="明 天",t[2].weekday="后 天",n.everyWeekData=t,n.todayData=l({},t[0]),n.tomorrowData=l({},t[1])},function(e){})},getAir:function(e,t){},getLifeIndex:function(e,t){var n=this;e&&t&&(0,a.getLifeStyle)(e,t,function(e){var t=[],o=e.data.HeWeather6[0].lifestyle,i=Object.keys(c.lifeIndexEnum);i.forEach(function(e){var n=o.filter(function(t){return t.type==e});0!=n.length&&t.push(n[0])}),n.lifeStyle=t,n.warmPrompt=t[0].txt},function(e){})}}});t.default=g}).call(this,n("0de9")["default"],n("6e42")["default"])},"319d":function(e,t,n){"use strict";n.r(t);var o=n("233e"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);t["default"]=i.a},baff:function(e,t,n){},c97b:function(e,t,n){"use strict";n.r(t);var o=n("1b05"),i=n("319d");for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);n("f9a9");var c,s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],c);t["default"]=r.exports},f9a9:function(e,t,n){"use strict";var o=n("baff"),i=n.n(o);i.a}},[["2287","common/runtime","common/vendor"]]]);